import { pool } from '../config/db.js'import { Beneficiary } from '../types/user.js'export const BeneficiaryModel = {  async create(userId: number | string, data: { name: string; bank_name?: string; document?: string; pix_key: string; key_type?: string }): Promise<Beneficiary> {    const { name, bank_name, document, pix_key, key_type } = data    const q = `INSERT INTO beneficiaries (user_id, name, bank_name, document, pix_key, key_type)               VALUES ($1,$2,$3,$4,$5,$6) RETURNING *`    const params = [userId, name, bank_name || null, document || null, pix_key, key_type || null]    const res = await pool.query(q, params)    return res.rows[0]  },  async listByUser(userId: number | string): Promise<Beneficiary[]> {    const res = await pool.query('SELECT * FROM beneficiaries WHERE user_id=$1 ORDER BY id DESC', [userId])    return res.rows  },  async get(userId: number | string, id: number | string): Promise<Beneficiary | null> {    const res = await pool.query('SELECT * FROM beneficiaries WHERE user_id=$1 AND id=$2', [userId, id])    return res.rows[0] || null  },  async remove(userId: number | string, id: number | string): Promise<{ success: boolean }> {    await pool.query('DELETE FROM beneficiaries WHERE user_id=$1 AND id=$2', [userId, id])    return { success: true }  },  async update(userId: number | string, id: number | string, data: Partial<Beneficiary>): Promise<Beneficiary | null> {    const fields = []    const params: any[] = [userId, id]    let idx = 3    if (data.name !== undefined) { fields.push(`name=$${idx++}`); params.push(data.name) }    if (data.bank_name !== undefined) { fields.push(`bank_name=$${idx++}`); params.push(data.bank_name || null) }    if (data.document !== undefined) { fields.push(`document=$${idx++}`); params.push(data.document || null) }    if (data.pix_key !== undefined) { fields.push(`pix_key=$${idx++}`); params.push(data.pix_key) }    if (data.key_type !== undefined) { fields.push(`key_type=$${idx++}`); params.push(data.key_type || null) }    if (fields.length === 0) {      const res = await pool.query('SELECT * FROM beneficiaries WHERE user_id=$1 AND id=$2', [userId, id])      return res.rows[0]    }    const q = `UPDATE beneficiaries SET ${fields.join(', ')} WHERE user_id=$1 AND id=$2 RETURNING *`    const res = await pool.query(q, params)    return res.rows[0] || null  },};export default BeneficiaryModel