import express, { Request, Response, NextFunction } from 'express';import { userController } from '../controllers/UserController.js'import { userFeeController } from '../controllers/UserFeeController.js';import { UserModel } from '../models/UserModel.js';const router = express.Router();router.post('/internal/validate-credentials', async (req: Request, res: Response) => {  try {    const { app_id, app_secret } = req.body;    if (!app_id || !app_secret) {      return res.status(400).json({        ok: false,        error: 'ValidationError',        message: 'app_id e app_secret são obrigatórios.',      });    }    const user = await UserModel.findByAppId(String(app_id));    if (!user) {      return res.status(401).json({        ok: false,        error: 'Unauthorized',        message: 'app_id inválido.',      });    }    const storedSecret = user.client_secret || user.app_secret_hash;    if (storedSecret !== String(app_secret)) {      return res.status(401).json({        ok: false,        error: 'Unauthorized',        message: 'app_secret inválido.',      });    }    return res.json({      ok: true,      user: {        id: user.id,        app_id: user.app_id,        email: user.email,        name: user.name,      },    });  } catch (err) {    console.error('[internal.routes] Error validating credentials:', err);    return res.status(500).json({      ok: false,      error: 'InternalServerError',      message: 'Erro ao validar credenciais.',    });  }});router.get('/internal/users/:id/fees', (req: Request, res: Response, next: NextFunction) =>  userFeeController.internalGetUserFees(req, res, next));export default router;