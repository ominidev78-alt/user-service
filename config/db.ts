import { Pool } from 'pg';import { env } from './env.js';export const pool = new Pool({  connectionString: env.DATABASE_URL,  ssl: env.DATABASE_URL && env.DATABASE_URL.includes('sslmode=require') ? { rejectUnauthorized: false } : false,});export async function initDb() {  console.log('[DB user-service] init...');  await pool.query(`    CREATE TABLE IF NOT EXISTS users (      id BIGSERIAL PRIMARY KEY,      external_id TEXT,      name TEXT NOT NULL,      email TEXT,      document TEXT,      cnpj TEXT,      company_name TEXT,      trade_name TEXT,      partner_name TEXT,      cnpj_data JSONB,      doc_status TEXT DEFAULT 'PENDING',      created_at TIMESTAMPTZ DEFAULT NOW()    );  `);  await pool.query(`    CREATE TABLE IF NOT EXISTS user_fees (      user_id BIGINT PRIMARY KEY REFERENCES users(id) ON DELETE CASCADE,      pix_in_percent NUMERIC(5,2) NOT NULL DEFAULT 0,      pix_out_percent NUMERIC(5,2) NOT NULL DEFAULT 0,      pix_in_fee_type TEXT DEFAULT 'PERCENT',      pix_in_fee_value NUMERIC(18,2) NOT NULL DEFAULT 0,      pix_out_fee_type TEXT DEFAULT 'PERCENT',      pix_out_fee_value NUMERIC(18,2) NOT NULL DEFAULT 0,      created_at TIMESTAMPTZ DEFAULT NOW(),      updated_at TIMESTAMPTZ DEFAULT NOW()    );  `);  await pool.query(`    CREATE TABLE IF NOT EXISTS providers (      id SERIAL PRIMARY KEY,      code TEXT NOT NULL UNIQUE,      name TEXT NOT NULL,      base_url TEXT,      active BOOLEAN DEFAULT TRUE,      created_at TIMESTAMPTZ DEFAULT NOW()    );  `);  await pool.query(`    CREATE TABLE IF NOT EXISTS maintenance_mode (      id INTEGER PRIMARY KEY,      is_active BOOLEAN DEFAULT FALSE,      message TEXT,      created_at TIMESTAMPTZ DEFAULT NOW(),      updated_at TIMESTAMPTZ DEFAULT NOW()    );  `);  await pool.query(`    CREATE TABLE IF NOT EXISTS beneficiaries (      id BIGSERIAL PRIMARY KEY,      user_id BIGINT REFERENCES users(id) ON DELETE CASCADE,      name TEXT NOT NULL,      bank_name TEXT,      document TEXT,      pix_key TEXT NOT NULL,      key_type TEXT,      created_at TIMESTAMPTZ DEFAULT NOW()    );  `);  console.log('[DB user-service] ok.');}